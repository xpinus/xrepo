import{a2 as i,t as a,aq as n,q as h}from"./chunks/framework.jAttmLhR.js";const l="/redis-role.png",y=JSON.parse('{"title":"Redis","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge-lib/backend/redis.md","filePath":"knowledge-lib/backend/redis.md"}'),k={name:"knowledge-lib/backend/redis.md"};function t(p,s,e,F,r,d){return h(),a("div",null,s[0]||(s[0]=[n(`<h1 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to &quot;Redis&quot;">​</a></h1><h2 id="镜像启动" tabindex="-1">镜像启动 <a class="header-anchor" href="#镜像启动" aria-label="Permalink to &quot;镜像启动&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6380:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">inus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">esktop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">angchain_test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">edisconfig:/usr/local/etc/redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myredis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/etc/redis/redis.conf</span></span></code></pre></div><p><strong>docker版本如何添加配置文件</strong><a href="https://hub.docker.com/_/redis" target="_blank" rel="noreferrer">https://hub.docker.com/_/redis</a> 在官网下载对应版本的源代码版本，其中有redis.conf,将其放在电脑的对应文件夹下</p><p><strong>设置密码</strong> 配置文件中<code>requirepass</code>字段</p><p><strong>测试</strong> 启动服务 redis-server 启动客户端 redis-cli<br> quit 退出 以二进制存储，默认不支持中文， redis-cli --raw (显示原始值，用于显示中文)</p><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-label="Permalink to &quot;基础&quot;">​</a></h2><h3 id="字符串-string" tabindex="-1">字符串 String <a class="header-anchor" href="#字符串-string" aria-label="Permalink to &quot;字符串 String&quot;">​</a></h3><blockquote><p>默认格式</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namevalue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 键名区分大小写   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 获取</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keyname</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 是否存在</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KEYS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  *</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 查找所有的键 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FLUSHALL</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除所有</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TTL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查询过期时间  -1标识未设置  -2表示过期</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXPIRE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 设置过期时间10s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SETEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 设置键值和过期时间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SETNX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 只有当name不存在时才设置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INCR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 自增</span></span></code></pre></div><h3 id="列表-list" tabindex="-1">列表 List <a class="header-anchor" href="#列表-list" aria-label="Permalink to &quot;列表 List&quot;">​</a></h3><blockquote><p>有顺序的一组</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LPUSH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  arr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 从后添加一个值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RPUSH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 从前面添加</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LRANGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 获取第一个到最后一个的值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LPOP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 从后pop出1个值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RPOP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LLEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arr</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 获取长度</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RPOPLPUSH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> des</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 一个简单的消息队列？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LTRIM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  stop</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除[start, stop]之外的元素</span></span></code></pre></div><h3 id="集合-set" tabindex="-1">集合 Set <a class="header-anchor" href="#集合-set" aria-label="Permalink to &quot;集合 Set&quot;">​</a></h3><blockquote><p>无序集合</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   setname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [m1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">....]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SMEMBERS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setname</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看成员</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SISMEMBER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> m1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 判断是否存在</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SREM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  m1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 集合交并差集</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SINTER</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SUNION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SDIFF</span></span></code></pre></div><h3 id="有序集合-sortedset" tabindex="-1">有序集合 SortedSet <a class="header-anchor" href="#有序集合-sortedset" aria-label="Permalink to &quot;有序集合 SortedSet&quot;">​</a></h3><blockquote><p>每一个成员关联一个float数，根据其大小排序</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ZADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  zset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  30</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  30</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> D</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 插入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ZRANGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [WITHSCORES] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ZSCORE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看分数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ZRANK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看排序（从大到小）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ZREVRANK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #    （从小到大）</span></span></code></pre></div><h3 id="哈希-hash" tabindex="-1">哈希 hash <a class="header-anchor" href="#哈希-hash" aria-label="Permalink to &quot;哈希 hash&quot;">​</a></h3><blockquote><p>映射表</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HSET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HGET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HGETALL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hname</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 获取所有key value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HDEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HEXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HKEYS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HLEN</span></span></code></pre></div><h3 id="发布订阅" tabindex="-1">发布订阅 <a class="header-anchor" href="#发布订阅" aria-label="Permalink to &quot;发布订阅&quot;">​</a></h3><blockquote><p>消息无法持久化</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PUBLISH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   message</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SUBSCRIBE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  channel</span></span></code></pre></div><h3 id="消息队列-stream" tabindex="-1">消息队列 Stream <a class="header-anchor" href="#消息队列-stream" aria-label="Permalink to &quot;消息队列 Stream&quot;">​</a></h3><blockquote><p>redis5.0</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  channel</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  course</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  redis</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # *表示生成随机ID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XLEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看队列中的消息数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XRANGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  end</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 产看所有消息</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # (-)   (+) 表示所有消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XDEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 删除指定id消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XTRIM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  MAXLEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除所有</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XREAD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COUNT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BLOCK</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  STREAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 可以重复读取</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     读两条   如果没有阻塞1000ms     从channel中的位置0开始读</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 消费者组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XGROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  group1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#              消息名     组名     id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XINFO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GROUPS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XGROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CREATECONSUMER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  group1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  c1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 添加消费者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">XREADGROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  GROUP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> group1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COUNT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  BLOCK</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> STREAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channnel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 消费者c1消费最新的消息</span></span></code></pre></div><h3 id="地理空间-geospatial" tabindex="-1">地理空间 Geospatial <a class="header-anchor" href="#地理空间-geospatial" aria-label="Permalink to &quot;地理空间 Geospatial&quot;">​</a></h3><blockquote><p>存储地理位置信息及各种操作 redis3.2</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GEOADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  city</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 116.405285</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  39.904989</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beijing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  121.472644</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 31.231706</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shanghai</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#返回值表示成功添加的位置数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GEOPOS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> city</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beijing</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 获取 [经度，纬度]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GEODIST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> city</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beijing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shanghai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [KM]千米单位</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#返回值默认单位m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GEOSEARCH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  city</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  FROMMEMBER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shanghai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  BYRADIUS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KM</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 附近的位置</span></span></code></pre></div><h3 id="hyperloglog" tabindex="-1">HyperLogLog <a class="header-anchor" href="#hyperloglog" aria-label="Permalink to &quot;HyperLogLog&quot;">​</a></h3><blockquote><p>基数</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PFADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> course</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PFCOUNT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> course</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PFMERGER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> h1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  h2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  合并</span></span></code></pre></div><h3 id="位图bitmap" tabindex="-1">位图Bitmap <a class="header-anchor" href="#位图bitmap" aria-label="Permalink to &quot;位图Bitmap&quot;">​</a></h3><blockquote><p>0 1</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SETBIT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dianzan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 设置名为点赞的位图在位置1处的值为1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GETBIT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dianzan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dianzan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\\xF0&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  设置一个位图11110000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITCOUNT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dianzan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  统计有几个1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITPOS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dianzan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   返回第一个出现0/1的位置</span></span></code></pre></div><h3 id="位域bitfield" tabindex="-1">位域Bitfield <a class="header-anchor" href="#位域bitfield" aria-label="Permalink to &quot;位域Bitfield&quot;">​</a></h3><blockquote><p>将很多小的整数存储到一个较大的位图中</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITFIEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  palyer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   u8</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     #0        1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#                     U8类型  第一个位置   值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITFIEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  palyer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   u8</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #0       1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITFIEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  palyer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   u32</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     #1        100</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BITFIEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  palyer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  incrby</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  u32</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #1       100   # 增加100，执行后变为200</span></span></code></pre></div><h3 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h3><blockquote><p>一次请求中执行多个命令</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MULTI</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXEC/DISCARD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">先把所有命令都放到一个队列中缓存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXEC触发执行，任何一个失败其他命令仍然会执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">不会在中途插入新命令</span></span></code></pre></div><h3 id="持久化" tabindex="-1">持久化 <a class="header-anchor" href="#持久化" aria-label="Permalink to &quot;持久化&quot;">​</a></h3><p>RDB: 在指定时间间隔内将快照存放进磁盘<br> save/bgsave命令手动触发<br> 更适合来备份 AOF：追加文件，日志形式存储每一条快照 appendonly yes</p><h3 id="主从复制" tabindex="-1">主从复制 <a class="header-anchor" href="#主从复制" aria-label="Permalink to &quot;主从复制&quot;">​</a></h3><p>将一台redis的数据复制到另一台 主节点（负责写操作） ===（单向）===》 从节点（负责读操作） <img src="`+l+'" alt="配置方式tips"> redis.config<br> port pidfile dbfilename replicaof</p><h3 id="哨兵模式" tabindex="-1">哨兵模式 <a class="header-anchor" href="#哨兵模式" aria-label="Permalink to &quot;哨兵模式&quot;">​</a></h3><p>运行在redis集群中 监控，查看节点是否正常 通知，如果发现某个节点问题，通过发布订阅通知其它节点 自动的故障转移，将一个从节点升为主节点，并将其它节点关系进行转移</p><p>sentinel.config sentinel monitor master host port mastername</p><p>redis-sentinel sentinel.config</p><p>为防止哨兵自己出问题，一般使用3个哨兵节点进程</p>',52)]))}const C=i(k,[["render",t]]);export{y as __pageData,C as default};
