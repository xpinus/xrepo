import{a2 as i,t as a,aq as e,q as l}from"./chunks/framework.jAttmLhR.js";const c=JSON.parse('{"title":"å¼€å‘æœåŠ¡å™¨é…ç½®é€‰é¡¹","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge-lib/engineering/æ„å»º/vite/é…ç½®/å¼€å‘æœåŠ¡å™¨é…ç½®.md","filePath":"knowledge-lib/engineering/æ„å»º/vite/é…ç½®/å¼€å‘æœåŠ¡å™¨é…ç½®.md"}'),n={name:"knowledge-lib/engineering/æ„å»º/vite/é…ç½®/å¼€å‘æœåŠ¡å™¨é…ç½®.md"};function t(h,s,p,k,r,o){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="å¼€å‘æœåŠ¡å™¨é…ç½®é€‰é¡¹" tabindex="-1">å¼€å‘æœåŠ¡å™¨é…ç½®é€‰é¡¹ <a class="header-anchor" href="#å¼€å‘æœåŠ¡å™¨é…ç½®é€‰é¡¹" aria-label="Permalink to &quot;å¼€å‘æœåŠ¡å™¨é…ç½®é€‰é¡¹&quot;">â€‹</a></h1><blockquote><p>å¼€å‘æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œå¼€å‘æœåŠ¡å™¨çš„ç«¯å£ã€ä»£ç†ã€CORS....</p></blockquote><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¼—å¤šé…ç½®é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="host" tabindex="-1">host <a class="header-anchor" href="#host" aria-label="Permalink to &quot;host&quot;">â€‹</a></h2><blockquote><p>æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ª IP åœ°å€</p></blockquote><ul><li>é»˜è®¤ï¼š &#39;localhost&#39;</li><li>æ€è€ƒğŸ¤” æ­£å¸¸æƒ…å†µä¸‹å°±æ˜¯ localhost å°±å¥½äº†å‘€ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¿˜å­˜åœ¨è¦ä¿®æ”¹ host çš„æƒ…å†µå‘¢ï¼Ÿ <ul><li>é™¤äº† localhost ä»¥å¤–ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜éœ€è¦è®¾ç½®ä¸º 0.0.0.0 æˆ–è€… trueï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰çš„ç½‘ç»œæ¥å£è¯·æ±‚ã€‚æœ‰äº›æ—¶å€™éœ€è¦å¤šè®¾å¤‡æ¥æµ‹è¯•åº”ç”¨ã€‚</li></ul></li></ul><h2 id="port" tabindex="-1">port <a class="header-anchor" href="#port" aria-label="Permalink to &quot;port&quot;">â€‹</a></h2><blockquote><p>æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ªç«¯å£ 5173</p></blockquote><h2 id="strictport" tabindex="-1">strictPort <a class="header-anchor" href="#strictport" aria-label="Permalink to &quot;strictPort&quot;">â€‹</a></h2><blockquote><p>è®¾ä¸º true æ—¶è‹¥ç«¯å£å·²è¢«å ç”¨åˆ™ä¼šç›´æ¥é€€å‡ºï¼Œè€Œä¸æ˜¯å°è¯•ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£</p></blockquote><h2 id="open" tabindex="-1">open <a class="header-anchor" href="#open" aria-label="Permalink to &quot;open&quot;">â€‹</a></h2><blockquote><p>æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</p></blockquote><h2 id="https" tabindex="-1">https <a class="header-anchor" href="#https" aria-label="Permalink to &quot;https&quot;">â€‹</a></h2><blockquote><p>å¯ç”¨ TLS + HTTP/2</p></blockquote><ul><li>å½“ server.proxy é€‰é¡¹ ä¹Ÿè¢«ä½¿ç”¨æ—¶ï¼Œå°†ä¼šä»…ä½¿ç”¨ TLS</li><li>éœ€è¦ä¸€ä¸ªåˆæ³•å¯ç”¨çš„è¯ä¹¦ã€‚å¯¹åŸºæœ¬ä½¿ç”¨çš„é…ç½®éœ€æ±‚æ¥è¯´ï¼Œä½ å¯ä»¥æ·»åŠ  @vitejs/plugin-basic-ssl åˆ°é¡¹ç›®æ’ä»¶ä¸­ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºå’Œç¼“å­˜ä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦ã€‚</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®š SSL è¯ä¹¦å’Œç§é’¥çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    https: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      key: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      cert: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.crt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="proxy" tabindex="-1">proxy <a class="header-anchor" href="#proxy" aria-label="Permalink to &quot;proxy&quot;">â€‹</a></h2><blockquote><p>é…ç½®ä»£ç†</p></blockquote><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proxy: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;/foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:4567&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°† &#39;/foo&#39; å‰ç¼€çš„è¯·æ±‚ä»£ç†åˆ° &#39;http://localhost:4567&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="cors" tabindex="-1">cors <a class="header-anchor" href="#cors" aria-label="Permalink to &quot;cors&quot;">â€‹</a></h2><blockquote><p>ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½® CORS</p></blockquote><h2 id="headers" tabindex="-1">headers <a class="header-anchor" href="#headers" aria-label="Permalink to &quot;headers&quot;">â€‹</a></h2><blockquote><p>ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½®è‡ªå®šä¹‰ HTTP headers</p></blockquote><h2 id="hmr" tabindex="-1">hmr <a class="header-anchor" href="#hmr" aria-label="Permalink to &quot;hmr&quot;">â€‹</a></h2><blockquote><p>ç¦ç”¨æˆ–é…ç½® HMR è¿æ¥</p></blockquote><h2 id="watch" tabindex="-1">watch <a class="header-anchor" href="#watch" aria-label="Permalink to &quot;watch&quot;">â€‹</a></h2><blockquote><p>è‡ªå®šä¹‰æ–‡ä»¶ç›‘è§†å™¨çš„é€‰é¡¹ã€‚è¿™å¯¹äºå¼€å‘è¿‡ç¨‹ä¸­çš„çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰éå¸¸å…³é”®ã€‚èƒŒåå…¶å®ä½¿ç”¨çš„æ˜¯ chokidarï¼Œä¸€ä¸ª Node.js çš„æ–‡ä»¶ç³»ç»Ÿç›‘å¬åº“ï¼Œä¼ é€’ç»™ chokidar çš„æ–‡ä»¶ç³»ç»Ÿç›‘å¬å™¨é€‰é¡¹</p></blockquote><ul><li>é»˜è®¤ä¼šå¿½ç•¥å¯¹ .git/ å’Œ node_modules/ ç›®å½•çš„ç›‘å¬</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    watch: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä»»ä½•ä½äº ignored-directory ç›®å½•ä¸‹çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æˆ–è€…ä»»ä½•ç›®å½•ä¸‹é¢çš„ some-specific-file.txt æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å†…å®¹å‘ç”Ÿæ›´æ”¹éƒ½ä¸ä¼šè§¦å‘ HMR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ignored: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/ignored-directory/**&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/some-specific-file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      persistent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒç»­ç›‘å¬å˜åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      usePolling: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨è½®è¯¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      interval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è½®è¯¢é—´éš” 100 æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      binaryInterval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¯¹äºäºŒè¿›åˆ¶æ–‡ä»¶çš„è½®è¯¢é—´éš”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// watch: null å…³é—­æ–‡ä»¶ç›‘å¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="middlewaremode" tabindex="-1">middlewareMode <a class="header-anchor" href="#middlewaremode" aria-label="Permalink to &quot;middlewareMode&quot;">â€‹</a></h2><blockquote><p>ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½®ä¸­é—´ä»¶æ¨¡å¼</p></blockquote><h2 id="base" tabindex="-1">base <a class="header-anchor" href="#base" aria-label="Permalink to &quot;base&quot;">â€‹</a></h2><blockquote><p>åœ¨ HTTP è¯·æ±‚ä¸­é¢„ç•™æ­¤æ–‡ä»¶å¤¹ï¼Œç”¨äºä»£ç† Vite ä½œä¸ºå­æ–‡ä»¶å¤¹æ—¶ä½¿ç”¨</p></blockquote><h2 id="fs" tabindex="-1">fs <a class="header-anchor" href="#fs" aria-label="Permalink to &quot;fs&quot;">â€‹</a></h2><ul><li>strict é™åˆ¶ä¸ºå·¥ä½œåŒº root è·¯å¾„ä»¥å¤–çš„æ–‡ä»¶çš„è®¿é—®</li><li>allow é™åˆ¶å“ªäº›æ–‡ä»¶å¯ä»¥é€šè¿‡ /@fs/ è·¯å¾„æä¾›æœåŠ¡ã€‚å½“ server.fs.strict è®¾ç½®ä¸º true æ—¶ï¼Œè®¿é—®è¿™ä¸ªç›®å½•åˆ—è¡¨å¤–çš„æ–‡ä»¶å°†ä¼šè¿”å› 403 ç»“æœ</li><li>deny ç”¨äºé™åˆ¶ Vite å¼€å‘æœåŠ¡å™¨æä¾›æ•æ„Ÿæ–‡ä»¶çš„é»‘åå•</li><li>origin ç”¨äºå®šä¹‰å¼€å‘è°ƒè¯•é˜¶æ®µç”Ÿæˆèµ„äº§çš„ origin</li></ul>`,35)]))}const E=i(n,[["render",t]]);export{c as __pageData,E as default};
