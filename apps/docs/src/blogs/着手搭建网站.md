# è´­ä¹°åŸŸåå’ŒæœåŠ¡å™¨
  ç½‘ç«™éƒ¨ç½²ä¸Šçº¿å¿…ä¸å¯å°‘çš„éœ€è¦åŸŸå(xxx.com)ç”¨æ¥è®¿é—®ï¼Œä»¥åŠç¨‹åºè¿è¡Œçš„æœåŠ¡å™¨ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦ä¹°çš„ğŸ’°ï¼Œè¿™ä¸¤è€…æœ€å¥½é€‰æ‹©åŒä¸€å®¶è´­ä¹°ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ã€‚

## åŸŸå
**åŸŸåå•†ï¼š** é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰
**åç¼€ï¼š**

* .com é€šç”¨åŸŸå
* .net ç½‘ç»œæœåŠ¡å•†
* .cn ä¸­å›½
* .gov æ”¿åºœéƒ¨é—¨
* .club
* .top
* .xyz

**è´­ä¹°ï¼š** åœ¨å“ªä¹°éƒ½ä¸€æ ·ï¼Œåªæ˜¯ä»·æ ¼çš„åŒºåˆ«ï¼Œæœ€å¥½å’Œä½ ä¹°çš„æœåŠ¡å™¨ä¸€ä¸ªæœåŠ¡å•†ï¼Œæ³¨æ„åƒæ˜¯è…¾è®¯äº‘æœ‰ä¸€ä¸ªé¦–æ¬¡è´­ä¹°ä¼˜æƒ æŠ˜æ‰£ï¼Œæœ€å¥½å…ˆä¹°æœåŠ¡å™¨ï¼Œå†ä¹°åŸŸåã€‚

**å¤‡æ¡ˆï¼š**æˆ‘å›½çš„åŸŸåè¦æƒ³æ­£å¸¸ä½¿ç”¨å¿…é¡»è¦è¿›è¡Œå¤‡æ¡ˆï¼Œè…¾è®¯äº‘è´­ä¹°åä¼šæç¤ºä½ è¿›è¡Œå¤‡æ¡ˆï¼Œæ ¹æ®æµç¨‹èµ°å°±è¡Œã€‚åŸŸåè´­ä¹°`72å°æ—¶`åæ‰å¯ä»¥è¿›è¡Œå¤‡æ¡ˆï¼Œå¤‡æ¡ˆæ—¶é—´æ¯”è¾ƒé•¿20å¤©å·¦å³ï¼Œè€å¿ƒç­‰å¾…ã€‚ä¹‹åè¿˜æœ‰ä¸€ä¸ªå…¬å®‰å¤‡æ¡ˆã€‚

![image-20220709163010820](https://imagehost-1311720054.cos.ap-nanjing.myqcloud.com/blog/%E7%9D%80%E6%89%8B%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99/image-20220709163010820.png)

## æœåŠ¡å™¨

æ ¹æ®è‡ªå·±é’±åŒ…åšåº¦é€‰æ‹©åˆé€‚çš„å°±è¡ŒğŸ‘›ğŸ˜­ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨è…¾è®¯äº‘è´­ä¹°äº†æœåŠ¡å™¨

é€‰æ‹©æœåŠ¡å™¨æ˜¯ä¼šè®©ä½ é€‰æ‹©æœåŠ¡å™¨åˆå§‹ç³»ç»Ÿï¼Œè…¾è®¯äº‘æ˜¯æä¾›äº†å¾ˆå¤šå¯é€‰çš„ï¼Œé€‰é”™äº†ä¹Ÿæ²¡äº‹ï¼Œä»¥åé‡è£…ç³»ç»Ÿå¾ˆæ–¹ä¾¿çš„ã€‚

æˆ‘é€‰æ‹©äº†ubuntu 20 -docekr åŸºç¡€é•œåƒï¼Œæœªæ¥ä¼šä½¿ç”¨dockerè¿›è¡Œéƒ¨ç½²ç½‘ç«™ï¼Œæ–¹ä¾¿ä¸€ç‚¹ã€‚

1 é‡ç½®å¯†ç ï¼Œubuntuè¿˜éœ€è¦æ ¹æ®å®˜æ–¹æç¤ºå¼€å¯rootçš„sshç™»å½•

2 æœ¬åœ°ä½¿ç”¨mobaXtermè¿œç¨‹è¿æ¥ï¼ˆæˆ–è€…å…¶ä»–è¿œç¨‹è¿æ¥å·¥å…·ï¼‰

3 é…ç½®git

```shell
ssh-keygen -t ed25519 -C "your_email@example.com"  # ç”Ÿæˆssh
# å¤åˆ¶ç”Ÿæˆçš„xxx.pubæ–‡ä»¶å†…å®¹
# åœ¨GitHub -> Setting -> SSH -> æ–°å¢ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªåå­—ï¼Œç²˜è´´ç”Ÿæˆçš„key
# git cloneå°±å¯ä»¥æ‹‰å–è‡ªå·±çš„ä»£ç äº†
```

4 å®‰è£…nodeç”¨äºæ‰§è¡Œæˆ‘çš„è„šæœ¬å·¥å…·

```shell
# é¦–å…ˆå®‰è£…npm
sudo apt install npm
# ç„¶åå®‰è£…n
sudo npm install n -g
# æœ€åå®‰è£…node æœ€æ–°ltsç‰ˆæœ¬
sudo n lts
# npm æ›´æ–°
npm install npm -g
npm istall yarn -g
```

# Deploy-util

ä¾¿æ·æ‹‰å–ä»£ç ï¼Œç¼–è¯‘é•œåƒï¼Œéƒ¨ç½²çš„è„šæ‰‹æ¶å·¥å…·ã€‚

* [chalk](https://www.npmjs.com/package/chalk)  nodeç»ˆç«¯æ ·å¼åº“
* [commander](https://www.npmjs.com/package/commander) å®Œæ•´çš„nodeå‘½ä»¤è¡Œè§£å†³æ–¹æ¡ˆ
* [ora](https://www.npmjs.com/package/ora) ä¼˜é›…çš„ç»ˆç«¯å¾®è°ƒå™¨, å®ç°åŠ è½½ä¸­çš„æ•ˆæœ
* [inquirer](https://www.npmjs.com/package//inquirer) å¸¸ç”¨äº¤äº’å¼å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢çš„é›†åˆ
* [child_process](http://nodejs.cn/api/child_process.html#child_processexeccommand-options-callback) æ‰§è¡Œç»ˆç«¯å‘½ä»¤
* [fs-extra](https://www.npmjs.com/package/fs-extra) æ‰©å±•çš„fsï¼Œä¾¿æ·æ–‡ä»¶å¤¹å¤åˆ¶
* [dotenv](https://www.npmjs.com/package/dotenv) ç”¨äºä».envæ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡

ä½¿ç”¨ï¼š

``` shell
# å…¨å±€å®‰è£…
npm i deploy-util -g
# æµ‹è¯•
deploy-util --help
```

**é—®é¢˜ï¼šè„šæœ¬æœ€ç»ˆéœ€è¦åœ¨nodeç¯å¢ƒä¸­è¿è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨requireä¸èƒ½import**

[ä¸€äº›è§£å†³æ–¹æ¡ˆ](https://blog.csdn.net/zwkkkk1/article/details/81564971)

**é—®é¢˜: ES Moduleä¸‹`__dirname` `__filename` ä¸å­˜åœ¨**

```js
import { fileURLToPath } from 'url'
import { dirname } from 'path'
const __filename = fileURLToPath(import.meta.url)
const __dirname = dirname(__filename)

console.log(__filename);
console.log(__dirname);
```

**é—®é¢˜ï¼š**

1. __dirname å¯ä»¥ç”¨æ¥åŠ¨æ€è·å–å½“å‰æ–‡ä»¶æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„

2. __filename å¯ä»¥ç”¨æ¥åŠ¨æ€è·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼ŒåŒ…å«å½“å‰æ–‡ä»¶

// __dirname å’Œ __filename æ˜¯ä¸å—æ‰§è¡Œ node å‘½ä»¤æ‰€å±è·¯å¾„å½±å“çš„

``` js
// æµ‹è¯• js æ–‡ä»¶æ–‡ä»¶è·¯å¾„ä¸º: E:\å‰ç«¯ç›¸å…³\demo_js\test\31.path.js
console.log('__dirname->', __dirname)
console.log('__filename->', __filename)
// è¾“å‡º: __dirname-> E:\å‰ç«¯ç›¸å…³\demo_js\test
// è¾“å‡º: __filename-> E:\å‰ç«¯ç›¸å…³\demo_js\test\31.path.js
```

**é—®é¢˜ï¼šexportså’Œmodule.exports**

```js
//å†™æ³•1
exports.hello = function(){
    console.log(â€˜worldâ€™);
}

//å†™æ³•2
var expObj = {
    hello : function(){
        console.log(â€˜worldâ€™);
    }
}
module.exports = expObj;

// ä½¿ç”¨
var h = require(â€˜helloâ€™);
h.hello();
```

æ¯ä¸€ä¸ªnode.jsæ‰§è¡Œæ–‡ä»¶ï¼Œéƒ½è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª`module.exports = {}`ï¼Œ`exports.xxx`çš„å†™æ³•æ˜¯ä¸ºäº†æ–¹ä¾¿å¯¼å‡ºå®ç°çš„ç‰¹æ€§ï¼Œå®é™…ä¸Šæœ€ç»ˆè¿˜æ˜¯ä¼šè½¬å˜ä¸º`module.export`ï¼Œæ³¨æ„å½“è®¾ç½®äº†`module.exports`æ—¶ï¼Œ`exports.xxx`çš„è®¾ç½®ä¼šå¤±æ•ˆ

## å‘å¸ƒnpm

1 åœ¨[npm](https://www.npmjs.com/)æ³¨å†Œè´¦å·

2 npm login   [å‚è€ƒ](https://www.jianshu.com/p/0faaff26a2c8)

``` shell
# é¦–å…ˆç¡®ä¿å½“å‰çš„æºæ˜¯å®˜æ–¹æº
npm config get registry
> http://registry.npm.taobao.org/  # åƒæˆ‘æ˜¯è®¾ç½®äº†æ·˜å®çš„æºï¼Œè¿™æ˜¯åªè¯»çš„ï¼Œéœ€è¦åˆ‡æ¢
# åˆ‡æ¢
npm config set registry https://registry.npmjs.org/
npm login
# æ ¹æ®æç¤ºè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ã€é‚®ç®±éªŒè¯ç 
```

3 npm publish

æˆåŠŸåå°±å¯ä»¥åœ¨npmä¸Šæœç´¢åˆ°äº†

4 æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨yarn publishï¼Œå®ƒä¼šæç¤ºä½ ä¿®æ”¹version

5 æˆåŠŸï¼Œå¯ä»¥åœ¨npmä¸­æœç´¢åˆ°äº†

![image-20220709163049501](https://imagehost-1311720054.cos.ap-nanjing.myqcloud.com/blog/%E7%9D%80%E6%89%8B%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99/image-20220709163049501.png)

**é—®é¢˜**

![image-20220709163059361](https://imagehost-1311720054.cos.ap-nanjing.myqcloud.com/blog/%E7%9D%80%E6%89%8B%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99/image-20220709163059361.png)

çœ‹ä¼¼æ˜¯æƒé™é—®é¢˜ï¼Œä½†npm loginå·²ç»æ‰§è¡Œäº†ï¼Œå¾ˆå¯èƒ½æ˜¯åŒ…çš„åç§°é‡å¤äº†ï¼Œæ¢ä¸€ä¸ªåå­—è¯•è¯•







# nginx éƒ¨ç½²å‰ç«¯é¡¹ç›®

