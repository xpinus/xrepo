# 系统架构设计师

# 基础知识

- 决策支持系统 DSS
  - 支持而不是代替用户决策
  - 解决半结构化或非结构化问题
  - 提高决策的有效性而不是效率
- 专家系统 ES
  - 知识库存储领域知识，综合数据库存储中间结果状态等
  - 推理机就是规则解释器，解释器是面向用户的
- EAI 企业应用集成
  - 4个层次的服务，由高到低：流程控制服务、应用链接服务、信息传递与转化服务、通讯服务
  - 技术架构层次，由高到低：会聚集成、应用集成、数据集成、网络集成
- RUP统一过程
  - 特点：用例驱动、以架构为中心、迭代和增量
  - 9个核心工作流：业务建模、需求、分析与设计、实现、测试、部署、配置与变更管理、项目管理、环境
- 构件
  - 构件的组装：顺序组装（按顺序调用）、层次组装（调用接口需要兼容）、叠加组装（合并新构件，整合功能）；
  - 构件组装可能的3种不兼容：
    - 参数不兼容
    - 操作不兼容
    - 操作不完备
- 测试
  - 白盒测试：路径覆盖 > 条件/判定覆盖 > 语句覆盖
  - 黑盒测试：等价类划分、边界值分析、判定表（多个复杂逻辑条件下）、因果图
  - 灰盒测试：全都要
  - 软件测试阶段：
    - 单元测试：依据【详细设计】，模块内功能、性能
    - 集成测试：依据【概要设计】，模块间的接口
    - 系统测试：依据【需求文档】，功能测试、性能测试、验收测试、压力测试等
    - 确认测试：依据【需求文档】，验证软件与需求的一致性。内部确认测试、Alpha测试、Beta测试、验收测试
  - 回归测试：变更是否引入新的错误
- 软件维护类型：
  - 正确性维护（修复bug）
  - 适应性维护（使软件适应环境）
  - 完善性维护（额外新需求和改进）
  - 预防性维护（防止被淘汰）
- 架构（Architecture Description Language，ADL）
  - 软件架构为软甲系统提供了一个结构、行为和属性的高级抽象
  - 架构风格是特定领域的惯用模式，定义了一个词汇表和一组约束
  - 架构风格：
    - 数据流风格（管道过滤器）：分阶段做数据处理，交互性差
    - 调用/返回风格（主子程序、面向对象、层次结构）：分层越多性能越差
    - 独立构件风格（进程通信、事件驱动<隐式调用>）：构件是独立的过程，连接件是消息传递
    - 虚拟机风格（解释器、基于规则的系统）：灵活自定义
    - 仓库以数据为中心的风格（数据库系统、黑板系统<语言处理 信号处理>、超文本系统）
  - ADL(Architecture Description Language) 架构描述语言是用于精确描述软件系统架构的重要工具
    - 构件：计算数据存储单元
    - 连接件：用于构件间交互建模的规则
    - 架构配置：描述体系结构的构件与连接件的连接图
  - DSSA（Domain-Specific Software Architecture，领域专用软件架构）
    - 基本活动：领域分析（建立领域模型）、领域设计（获得DSSA）、领域实现（开发和组织可复用信息）
    - 角色：领域专家、领域分析人员、领域设计人员、领域实现人员
  - ABSD（Architecture-Based Software Design）基于架构的软件设计是一种架构驱动方法
    - 强调由业务、质量和功能需求的组合驱动架构设计
    - 3个基础：功能的分解，选择架构风格，软件模板的使用
    - 开发过程：
      - 架构需求（需求获取、生成类图、打包成构件、需求评审）
      - 架构设计（提出架构模型、产生架构、设计评审）
      - 架构文档化（从使用者角度编写）
      - 架构复审
      - 架构实现（构件实现、构件组装、系统测试）
      - 架构演化（需求变化归类、架构演化计划、构件变动、更新构件相互作用、构件组装和测试、技术评审）
    - 架构评审
      - 基于软件系统的生命周期，可以将质量属性分为开发期和运行期
      - 场景：从风险承担者的角度
        - 刺激源
        - 刺激
        - 环境
        - 介质
        - 响应
        - 响应度量
      - 4类质量属性
        - 性能（响应时间、吞吐量）：优先级队列、资源调度
        - 可用性（故障间隔时间、故障修复时间）：冗余、心跳
        - 安全性：追踪审计
        - 可修改性：信息隐藏<开发时隐藏模块内部细节>
      - 风险点（潜在的隐患）、敏感点（为实现某质量属性，一个或多个构件所具有的特性）、权衡点（影响多个质量属性）
      - SAAM: 
      - ATAM: 
        - 4大阶段：场景和需求收集、结构视图场景实现、属性模型构造和分析、折中
        - 在系统开发之前，要对质量属性进行评价和折中
- MVC
  - Model：模型是应用程序用于处理数据逻辑的地方，从数据库存取数据
  - View：视图是根据数据模型创建、负责展示
  - Controller：控制器是负责处理用户交互的地方。从视图读取用户输入，并向模型发送数据。
  - J2EE架构：JSP（视图）；Servlet（控制器）；Entity/Session Bean（模型）
- SOA 面向服务的架构：粗颗粒度、松耦合、标准化、整体的服务尽可能放在一起、水平分层
  - 具体实现方案有 Webservice 与 ESB（企业服务总线）
  - UUDI：是web服务集成的一个体系框架，包含了服务描述与发现的标准规范
  - WSDL：服务描述语言，服务做什么/如何访问/位于何处
  - SOAP：XML协议，在分布式环境中交换信息
  - ESB：充当了服务之间通信的角色，位置透明、消息路由、服务注册命名、消息交换、多传输协议、日志与监控
- 微服务：细粒度、尽可能拆分、组件小、轻量级的通讯
  - 
- REST: 所有事物抽象为资源、资源唯一标识、通过HTTP请求方法操作资源、操作无状态
- gRPC
- MDA(Model Driven Architecture)是模型驱动架构，是一个软件开发框架
  - 计算无关模型：
  - 平台无关模型
  - 平台相关模型
- 负载均衡技术
  - 应用层：http重定向 、反代理服务器
  - 传输层：DNS、NAT
  - 硬件：F5
  - 软件负载均衡：nginx、LVS、HAproxy
- Redis
  - 与MemCache比较：丰富的数据结构/简单的KV结构、支持持久化、多种方式的分布式存储/哈希分片、有限支持事务、数据容灾
  - 分布式方案
    - 主从模式：一主多从，故障时手动切换
    - 哨兵模式：有哨兵的一主多从，自动故障转移
    - 集群模式：
- 数据库
  - 主从数据库
    - 主库写操作，从库读操作
    - 主从复制的步骤：主库更新完成前，将操作写binlog日志文件，从库连接主库加载操作日志，从库执行日志事件，实现与主库一致
  - 反规范化
    - 技术手段
      - 冗余列
      - 派生列
      - 重新组表
      - 分割表: 
    - 优点：连接操作少，检索快，统计快；缺点：数据冗余、插入更新删除开销大、数据不一致
    - 数据不一致问题解决：
      - 批处理
      - 应用程序处理
      - 触发器
      - 物化视图：非绝对实时，通过定期刷新保持数据一致，类似批处理
    - 视图的优点：简化用户操作、使用户以不同的方式查询统一数据、对机密数据提供安全保护、对数据库重构提供一定的逻辑独立性
    - 分区和分表
      - 共性：都针对数据表，分布式存储、提升查询效率、降低数据库压力
      - 差异：分区逻辑上还是一张表，分表就是多张表
      - 分区的优势：存储更多数据；数据管理更方便；精准定位分区查询不需要全表扫描；可跨多分区查询来提高查询的吞吐量；
  - NoSQL
    - 与关系型数据库对比：特定应用领域；海量数据存储；非结构化数据/二维表结构化数据；高并发/支持但性能有限；弱事务性；向外扩展<增加节点数量>/向上扩展<升级服务器配置>；
    - 分类:
      - KV（Redis，内容缓存，处理高负载访问）：
      - 列存储（Hbase，分布式文件系统）
      - 文档型（MongoDb，与KV类似，value是结构化的）：数据要求不严格，表结构可变，不需要像关系型数据库一样预定义表结构
      - 图形数据库（Neo4J，关系图谱）
    - 与MySql混用时的数据一致性解决方案
      - 实时同步方式：查询时先读缓存，查不到再读数据库，并将结果保存到缓存；更新时，利用事务的特性，先更新数据库，成功后再设置缓存
      - 异步的方式：采用消息中间件
      - 使用专门的数据同步工具，如mysql日志同步工具canal等
- 软件复用
  - 机会复用：开发过程中，只要发现可复用资产，就对其进行复用
  - 系统服用：开发前规划已决定哪些需要复用
  - 复用的3个基本过程：构造/获取可复用的软件资产、管理这些资产、从资产中选择可复用的部分
- WPDRRC 信息安全模型
  - 6个环节及能力：预警、保护、检测、响应、恢复、反击
  - 3大要素：人员、策略和技术
- 区块链
  - 4大基础技术支柱：分布式存储、共识机制、智能合约、密码学
  - 关键支撑技术：区块结构（基本数据单元）、P2P网络（去中心化的网络架构）、默克尔树（唯一根哈希，验证数据完整性）
- 国产密码算法：
  - SM1 对称加密 128bit 电子政务、商务等
  - SM2 非对称加密 
  - SM3 杂凑算法 256bit 数字签名
  - SM4 对称加密   无线局域网
  - SM9 标识密码算法  互联网新兴应用，不需要申请数字整书
- 嵌入式：
  - 工业级器件的工作温度：-40~85℃
  - 嵌入式数据库分类：基于内存、基于文件、基于网络
- 大数据：5V 大规模 高速度 多样化 价值密度低 真实性
  - Lambda vs Kappa
    - 复杂度和维护成本：Lambda需要维护两套系统，复杂度高，开发和维护成本搞；Kappa只有一套；
    - 计算开销：Lambda需要一直运行批处理和实时计算，计算开销大；Kappa必要时进行全量计算，开销相对较小；
    - 实时性：满足实时性
    - 使用场景：Lambda支持批处理，更适合对历史数据分析查询的场景，期望尽快得到分析结果，批处理可以直接高效的实现；Kappa不是Lambda的替代架构，而是简化，放弃对批处理的支持，更擅长业务本身为增量数据写入场景的分析需求；
    - 选择依据：根据业务需求、技术要求、系统复杂度、开发成本维护和历史数据处理能力作为依据，计算开销相差不大，不做考虑
- AI芯片的关键特征：新型计算范式、训练和推断、大数据处理能力、数据精度（降低精度的设计）、可重构的能力、开发工具（软件工具链）
- 数字孪生
  - 3项核心技术：建模、仿真、基于数据融合的数字线程
  - 底层伴生技术：物联网
  - 外围使能技术：云计算、机器学习、大数据、区块链
  - 生态系统：
    - 行业应用层：智能制造、智慧城市
    - 共性应用层：描述、诊断、预测、决策
    - 模型构建和仿真分析曾
    - 数据互动层
    - 基础支撑层：具体设备
# 云原生