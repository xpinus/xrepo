# è§„èŒƒæäº¤

## git commit è§„èŒƒ

[husky](https://typicode.github.io/husky/get-started.html)

```shell
pnpm add --save-dev husky
pnpm exec husky init

pnpm add commitizen cz-customizable commitlint-config-cz @commitlint/cli commitlint-config-git-commit-emoji commitlint-config-cz conventional-changelog-cli conventional-changelog-gitmoji-config -D
```

> commit-msg
```shell
echo "Running commitlint..."
pnpm dlx commitlint --edit $1
```

> package.json é…ç½®
```json
{
  "scripts": {
    "commit": "git add . &&  cz",
    "changelog": "conventional-changelog -p gitmoji-config -i CHANGELOG.md -s"
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    },
    "cz-customizable": {
      "config": ".cz-config.cjs"
    }
  }
}
```

> .cz-config.cjs é…ç½®
```js
const path = require('path');

// è¯»å–appså’Œpackagesç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å¤¹

const apps = require('fs').readdirSync(path.resolve(__dirname, 'apps'));

const packages = require('fs').readdirSync(path.resolve(__dirname, 'packages'));

const scopes = ['global', ...apps, ...packages].map((item) => ({
    name: item,
}));

module.exports = {
    types: [
        {
            value: ':sparkles: feat',
            name: 'âœ¨ feat:  æ–°åŠŸèƒ½',
        },
        {
            value: ':construction: feat',
            name: 'ğŸš§ construction:  å¼€å‘ä¸­',
        },
        {
            value: ':bug: fix',
            name: 'ğŸ› fix:  ä¿®å¤ bug',
        },
        {
            value: ':memo: docs',
            name: 'ğŸ“ docs:  æ–‡æ¡£å˜æ›´',
        },
        {
            value: ':lipstick: style',
            name: 'ğŸ’„ style:  æ ·å¼ç¾åŒ–',
        },
        {
            value: ':hammer: refactor',
            name: 'ğŸ”¨ refactor:  é‡æ„',
        },
        {
            value: ':zap: perf',
            name: 'âš¡ï¸ perf:  ä¼˜åŒ–',
        },
        {
            value: ':white_check_mark: test',
            name: 'âœ… test:  æµ‹è¯•',
        },
        {
            value: ':rewind: revert',
            name: 'âª revert:  å›é€€',
        },
        {
            value: ':twisted_rightwards_arrows: revert',
            name: 'ğŸ”€ merge:  åˆ†æ”¯åˆå¹¶',
        },
        {
            value: ':package: build',
            name: 'ğŸ“¦ï¸ build:  æ‰“åŒ…',
        },
        {
            value: ':wrench: chore',
            name: 'ğŸ”§ chore:  æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·',
        },
        {
            value: ':tada: init',
            name: 'ğŸ‰ init:  åˆå§‹åŒ–',
        },
    ],
    messages: {
        type: 'é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:',
        customScope: 'è¡¨ç¤ºè¯¥å˜æ›´çš„èŒƒå›´:',
        subject: 'çŸ­è¯´æ˜:\n',
        body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨"|"æ¢è¡Œ(å¯é€‰)ï¼š\n',
        breaking: 'éå…¼å®¹æ€§è¯´æ˜ (å¯é€‰):\n',
        footer: 'å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31, #34(å¯é€‰):\n',
        confirmCommit: 'ç¡®å®šæäº¤è¯´æ˜? yes/no',
    },
    scopes,
    allowCustomScopes: true,
    allowBreakingChanges: [':sparkles: feat', ':bug: fix'],
    skipQuestions: ['body', 'footer'],
    subjectLimit: 72,
};
```

> commitlint.config.js é…ç½®
```js
export default { extends: ['git-commit-emoji', 'cz'] };
```

``````

## lint-stage