# [Vite](https://vitejs.cn/vite3-cn/guide/)

vite主要由两部分组成：
- 一个开发服务器。基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）
- 一套构建指令。使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源

## [Vite插件API](https://vitejs.cn/vite3-cn/guide/api-plugin.html)

## [Vite JavaScript API](https://vitejs.cn/vite3-cn/guide/api-javascript.html)

## [Vite HMR API](https://vitejs.cn/vite3-cn/guide/api-hmr.html)



- 开发环节
  1. 首先，当启动vite开发服务器时，vite会检测入口文件
  2. 当你在浏览器中访问程序时，vite将拦截对入口文件及被模块导入的文件的请求
  3. vite支持使用浏览器内置的es模块系统来加载模块，这是浏览器原生支持的一种模块加载方式，这与传统的基于打包的构建工具（如webpack）有所不同
  4. vite会运行一个开发服务器，通过代理的形式将模块请求重定向到实际的模块文件路径，不需要webpack一样先打包，再加载
  5. 当代码有修改时，vite会根据代码的依赖关系对只有发生变化的模块进行重新构建，并将变化传递给浏览器，实现热更新

- 生产环节：
  - vite会使用预编译的方式来构建应用程序
  - 根据入口文件和依赖关系，分析模块的导入关系
  - vite会为每个模块都生成单独的、按需加载的优化过的es模块，这样每个模块都可以单独缓存加载
  - 还会生成用于生产环境的最终打包文件，将所有的模块和资源文件合并并压缩

vite利用对浏览器esm的原生支持，以及按需编译和缓存的思想来提供快速的开发体验，通过减少构建和打包的时间，实现了更快的开发和热更新效果