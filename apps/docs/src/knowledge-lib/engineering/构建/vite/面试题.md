# Vite面试题

## 控制打包结果的目录结构

```css
export default defineConfig({
    build: {
        rollupOptions: {
            output: {
                entryFileNames: 'js/[name]-[hash].js',
                chunkFileNames: 'js/[name]-[hash].js',
                /*assetFileNames: '[ext]/[name]-[hash].[ext]',*/
                assetFileNames(assetInfo) {
                    const name = assetInfo.name;
                    if (name.endsWith('.css')) {
                        return 'css/[name]-[hash].css';
                    }
                    return 'assets/[name]-[hash].[ext]';
                }
            }
        }
    }   
})
```

## vite自动依赖分析

- 标签静态资源链接路径
- css静态链接路径
- import()动态导入语句：忽略动态部分，将静态部分对应下的所有内容全部打包
  - 如```import(`./assets/${val}.jpg`)```，vite会将./assets/下所有jpg文件打包成一个js内引用jpg
  - 因此import不能是全部变量```import(${val})```，这样什么都分析不出来
- URL构造器：不会生成js，更简洁